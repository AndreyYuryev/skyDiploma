# Описание проекта

## Алгоритм агрегации статистических данных о зарплатах сотрудников компании по временным промежуткам
> Контекст
> 
> На обычном языке пример задачи выглядит следующим образом: “Необходимо посчитать суммы всех выплат с 28.02.2022 по 31.03.2022, единица группировки - день”.

### Описание задач

1. Создать алгоритм агрегации данных
2. Создать телеграм бота, который будет принимать от пользователей текстовые сообщения содержащие JSON с входными данными и отдавать агрегированные данные в ответ.


Алгоритм должен принимать на вход:
1. Дату и время старта агрегации в ISO формате (далее dt_from)
2. Дату и время окончания агрегации в ISO формате (далее dt_upto)
3. Тип агрегации (далее group_type). Типы агрегации могут быть следующие: hour, day, month. То есть группировка всех данных за час, день, неделю, месяц.
```
{"dt_from":"2022-09-01T00:00:00",
"dt_upto":"2022-12-31T23:59:00",
"group_type":"month" }
```
На выходе алгоритм формирует ответ содержащий:**
1. Агрегированный массив данных (далее dataset)
2. Подписи к значениям агрегированного массива данных в ISO формате (далее labels)
```
{"dataset": [5906586, 5515874, 5889803, 6092634], 
"labels": ["2022-09-01T00:00:00", "2022-10-01T00:00:00", 
"2022-11-01T00:00:00", "2022-12-01T00:00:00"]}
```

### Требования к ландшафту
- Создана база на MongoDB
- Заполнен файл переменных окружения .env на основе .env.sample
- Установлены библиотеки на основе requirements.txt
- Создан телеграм-бот


### Необходимые настройки
- Создать и заполнить базу данных MongoDB на основе файла `sample_collection.bson` с помощью загрузки командой `mongorestore` или загрузить данные из файла `sample_collection.json` с помощью MongoDBCompas. Файлы с данными находятся в папке `data`
- Создать и заполнить файл переменных окружения .env 



> В разработке 
### Для запуска с помощью Docker необходимо

- Создать и заполнить файл переменных окружения .env.docker с учетом настроек в файле docker-compose.yml
- Создать образы и контейнеры DOCKER с помощью команд
  - docker-compose build
  - docker-compose up

### Тесты

- Для запуска тестов можно использовать команду `pytest telebot`
